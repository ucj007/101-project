!function(){"use strict";var e,t,a,s=!1,i=function(){if(s){var e=Array.prototype.slice.call(arguments);console.log.apply(console,e)}},n={},r=["https://w.chatlio.com/v4/vendor/chatlio.min.80ec1f7e.js"],o=window.localStorage,l=0;(function(){try{var e=Date.now();return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage is not available"),!1}})()||(o={_data:{},setItem:function(e,t){this._data[e]=t},getItem:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null},removeItem:function(e){delete this._data[e]}});var c,h,m,d,p,u,g,f,v,w,E,b,y,S,C,T,N,I,U,k="function"==typeof window.html2canvas,A=!1,O="https://w.chatlio.com/v4/main.ad56b5c6.css",q=2e4,R=!0,_=!1,M={play:function(){}},L=function(){try{M=new Audio("https://w.chatlio.com/v4/media/water-drips-single16.a8269a82.mp3"),M.volume=.8}catch(e){M={play:function(){}}}},P={userId:void 0,traits:{}},x={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},D=/[&><"']/g,W=function(e){return x[e]},B=function(e){return e&&e.length>0?e.replace(D,W):""},F=function(e,t){var a=document.createEvent("Event");t&&(a.data=t),a.initEvent("chatlio."+e,!0,!0),C.dispatchEvent(a)},H=function(e){var t=document.createElement("div");t.id="chatlio-widget",document.getElementById("chatlioWidgetPlaceholder")?document.getElementById("chatlioWidgetPlaceholder").appendChild(t):document.body.appendChild(t),v=B(e.getAttribute("data-start-hidden"))||!1,"false"!==v&&"null"!==v||(v=!1),O=B(e.getAttribute("data-chatlio-css-src"))||O;try{p=JSON.parse(e.getAttribute("data-widget-options"))||{}}catch(e){p={}}return u=JSON.parse(e.getAttribute("data-widget-metadata")),t},j="currentScript"in document?document.currentScript:function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var a=e[t].src;if(a&&a.indexOf("w.chatlio-widget.js")>=0)return e[t]}return null}();if(!j)return void console.error("No Chatlio script node. Contact Chatlio support at support@chatlio.com");if(s=JSON.parse(B(j.getAttribute("data-chatlio-debug"))||!1),!(c=B(j.getAttribute("data-widget-id"))))return void console.warn("Missing widget UUID. Did you set the 'data-widget-id' attribute?");h="chatlio_uuid--"+c,m="chatlio_rt--"+c,d="chatlio_at--"+c,C=H(j),e=B(j.getAttribute("data-loader-version"));var J={"just now":"just now","y ago":"y ago","mo ago":"m ago","d ago":"d ago","h ago":"h ago","m ago":"m ago"},V=function(e){if(isNaN(e))return"";var t,a=Math.floor((new Date-e)/1e3),s="";return a<60?J["just now"]:(s=(t=Math.floor(a/31536e3))>1?J["y ago"]:(t=Math.floor(a/2592e3))>1?J["mo ago"]:(t=Math.floor(a/86400))>1?J["d ago"]:(t=Math.floor(a/3600))>1?J["h ago"]:(t=Math.floor(a/60))>=1?J["m ago"]:"",t+s)},z=function(e,t){var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",e),a.onload=t,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)},Y=function(e){return e&&"object"==typeof e&&"createElement"in e&&e.version>="0.14.3"&&"__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED"in e},Z=function(e){var t=e.split(".");return t.length<=2?e:t.slice(1).join(".")},K=function(e){var t=e+"=;path=/;domain="+Z(window.location.hostname)+";expires=Thu, 01 Jan 1970 00:00:01 GMT;";document.cookie=t},$=function(e,t){document.cookie=e+"="+t+"; path=/;domain="+Z(window.location.hostname)},G=function(e){for(var t=e+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){var i=a[s];if(-1!==i.indexOf(t)){for(;" "===i.charAt(0);)i=i.substring(1);var n=i.substring(t.length,i.length);return o.setItem(e,n),n}}return""},X={getItem:function(e){return o.getItem(e)||G(e)},setItem:function(e,t){o.setItem(e,t),$(e,t)},removeItem:function(e){o.removeItem(e),K(e)},vsUuid:function(){return X.getItem(h)}},Q=function(e){w="chatlio-"+e+"-messages",E="chatlio-"+e+"-isClosed",b="chatlio-"+e+"-provided-req-info",y=e+"--trran"};X.vsUuid().length>=36&&Q(X.vsUuid());var ee,te,ae=function(e){return e=e||{},clearTimeout(U),q=2e4,o.removeItem("chatlio-"+n.vsUuid()+"-a"),X.removeItem(h),X.removeItem(d),X.removeItem(m),e.token&&X.setItem(m,e.token),o.removeItem(E),o.removeItem(b),o.removeItem(w),o.removeItem(y),clearTimeout(S),P={userId:void 0,traits:{}},e.messages&&e.messages.length>0&&Array.isArray(e.messages)&&o.setItem(w,JSON.stringify(e.messages)),void 0!==e.isClosed?o.setItem(E,e.isClosed):o.setItem(E,"true"),e.reqInfo&&o.setItem(b,e.reqInfo),T&&T.disconnect&&T.disconnect(),T=void 0,!0},se=function(){return void 0!==window.define&&void 0!==window.require},ie=function(e,t){var a=new XMLHttpRequest;return"withCredentials"in a?(t&&""!==t||(t="GET"),a.open(t,e,!0),a):null},ne=function(e,t){t=t||{};var a;if("POST"===t.verb)a=ie(e,t.verb);else if(null!==t.data){var s=t.data||"vsUuid="+X.vsUuid()+"&ceUuid="+c;a=ie(e+"?"+s)}else a=ie(e);if(t.dontSendAuthToken||(t.sendRefreshToken&&X.getItem(m)&&X.getItem(m).length>0?a.setRequestHeader("Authorization","Bearer "+X.getItem(m)):X.getItem(d)&&X.getItem(d).length>0&&a.setRequestHeader("Authorization","Bearer "+X.getItem(d))),a.onload=function(){if("withCredentials"in a)if(200===a.status){if("token_expired_during_auth"===a.response.trim()&&!t.doNotRetry)return t.doNotRetry=!0,void oe(function(){ne(e,t)});if("no_visitor_auth_token"===a.response.trim())return;t.success&&t.success.apply(a,arguments)}else if(205===a.status)console.log("resetting visitor, visitor id not found",X.getItem(h)),n.reset();else if(a.status>=400&&a.status<500){if(403===a.status&&"visitor_session_not_approved"===a.response.trim())return console.warn("Got visitor_session_not_approved, resetting; visitorUUID: ",X.getItem(h)),ve=null,void n.reset();403===a.status&&"visitor_not_found"===a.response.trim()&&(console.log("resetting visitor, visitor id not found",X.getItem(h)),n.reset()),t.error&&t.error.apply(a,arguments)}else t.failure&&t.failure.apply(a,arguments);else{var s;try{s=JSON.parse(this.responseText)||{}}catch(e){s={}}var i;s.status&&(i=parseInt(s.status)),!s.status||"200"!==s.status&&"online"!==s.status?t.error&&s.status&&i>=400&&i<500?t.error.apply(a,arguments):t.failure&&t.failure.apply(a,arguments):t.success&&t.success.apply(a,arguments)}},a.onerror=function(){t.failure&&t.failure.apply(a,arguments)},t.timeout>0&&(a.timeout=t.timeout,t.ontimeout?a.ontimeout=function(){t.ontimeout.apply(a,arguments)}:a.ontimeout=function(){t.failure&&t.failure.apply(a,arguments)}),"POST"===t.verb){var i=JSON.stringify(t.data);a.send(i)}else a.send();return a},re=function(e){var t=e.getResponseHeader("X-Chatlio-Vsuuid");t&&t.length>0&&(X.setItem(h,t),Q(t)),X.setItem(m,e.getResponseHeader("X-Chatlio-Rt")),X.setItem(d,e.getResponseHeader("X-Chatlio-At"))},oe=function(e){ne("https://api.chatlio.com/v1/p/visitor/session/new",{verb:"POST",doNotRetry:!0,sendRefreshToken:!0,data:{vsUuid:X.vsUuid(),ceUuid:c,page:document.URL},success:function(){re(this),void 0!==e&&e(),ne("https://api.chatlio.com/v1/v/visitor/token/ack",{verb:"GET",doNotRetry:!0,success:function(){},failure:function(){console.warn("There was a problem confirming token. Please contact Chatlio support at support@chatlio.com.")}})},error:function(){console.error("error fetching visitor auth: contact support@chatlio.com "+this.status,this.responseText)},failure:function(){console.warn("There was a problem getting auth for visitor. Please contact Chatlio support at support@chatlio.com")}})},le=function(){var e=o.getItem(w);return JSON.parse(e)||[]},ce=function(e,t){return!!e&&1e3*e.ts>Date.now()-60*t*1e3},he=function(e){var t=o.getItem(E);return e&&_?(o.setItem(E,!0),!1):!(!t||"undefined"===t)&&!JSON.parse(t)},me=function(e){if(!e||""===e)return!1;for(var t=e.split(/[\s,]/).filter(function(e){return e.replace(/\s/,"")}),a=document.URL,s=0;s<t.length;s++){var i,n=t[s];try{i=new RegExp(n)}catch(e){console.warn("'%s' is not a valid regular expression",n);continue}if(a.match(i))return!0}return!1},de=function(){console.warn("Called render before initialization")},pe=function(e,t,a){if(t=t||{},""===e)return console.warn("No metadata"),{};if(!a&&N===e)return{};var s=JSON.parse(e);if(!s)return{};if(u){for(var n in u)i("[meta data] Overriding: '%s' = %o",n,u[n]),s[n]=u[n];e=JSON.stringify(s)}if(s.visitorIdentTraits){var r=JSON.parse(s.visitorIdentTraits);!P.traits.email&&r.email&&(P.traits.email=r.email,o.setItem(b,!0)),!P.traits.name&&r.name&&(P.traits.name=r.name)}var l=f;f=!0;var c=Number(s.maxVisitorInactiveMins)||0;return"busy"===s.status&&(c=Math.max(c,5)),!s.off&&"offline"!==s.status||ce(le().pop(),c)||(f=!1),l!==f&&F(f?"online":"offline"),g&&!me(s.blacklistedUrls)&&(s.expanded=he(a),de(s,t)),N=e,s},ue=function(e,t,a){a=a||{},ne("https://api.chatlio.com/v1/p/visitor/"+X.vsUuid()+"/event/"+t,{verb:"POST",data:a,failure:function(){console.warn("There was a problem sending the event to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})},ge=function(e){var t,a,s=/^[\w]{8}-[\w]{4}-[\w]{4}-[\w]{4}-[\w]{12}$/,i=/{"error":"([\w\s]*)"/g,n=function(){clearTimeout(a),a=setTimeout(function(){t&&t.close&&t.close(),ee()},2e4)};this.connect=function(){this.isOpen()||(t=new EventSource("https://es.chatlio.com/events/?at="+X.getItem(d)),n(),t.onmessage=function(t){n();var a=i.exec(t.data);if(a){var r=a[1];switch(r){case"bad token":case"invalid token":console.warn("[Chatlio, SSE-%d, onmessage] Token error: %s",e,r),this.close(),oe(ee);break;case"bad visitor uuid":case"bad ce uuid":console.warn("[Chatlio, SSE-%d, onmessage] Initialization error: %s",e,r);break;case"overquota":console.warn("[Chatlio, SSE-%d, onmessage] Overquota error: %s",e,r),this.close(),setTimeout(ee,6e4)}}else s.test(t.data)&&(pe(N,{startChat:!0},!0),ue(X.vsUuid(),"client-start-chat",{callbackID:t.data}))}.bind(this),t.onerror=function(){clearTimeout(a)},t.onopen=function(){n()})},this.isOpen=function(){return!(!t||t.readyState!==t.OPEN&&t.readyState!==t.CONNECTING)},this.close=function(){clearTimeout(a),t&&t.close&&t.close()}},fe=0;ee=function(){return fe++,window.EventSource||1!==fe?fe>=10?void console.warn("[Chatlio] Too many SSE reconnects. Aborting."):(te=new ge(fe),void te.connect()):void z("https://w.chatlio.com/v4/vendor/eventsource.min.3cb77f95.js",ee)};var ve,we=function(){if(0===X.getItem(m).length){var s=Date.now();return void(!ve||s-ve>1e3?(oe(we),ve=s):console.warn("Stopped loading widget, tried to many times too quickly, contact support@chatlio.com"))}a=t.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var i;document.referrer&&document.referrer.length>0&&location.host.length>0&&location.host!==document.referrer.split("/")[2]&&(i=encodeURIComponent(document.referrer.substring(0,240)));var n={vsUuid:X.vsUuid(),ceUuid:c,page:document.URL,referrerURL:i,loaderVersion:e,widgetVersion:"7c5e6ca-1530640258618"};ne("https://api.chatlio.com/v1/v/visitor/register",{verb:"POST",data:n,success:function(){A=!0,Pe(this.responseText),F("ready")},error:function(){},failure:function(){console.warn("There was a problem registering visitor. Please contact Chatlio support at support@chatlio.com")}})},Ee=function(e){var t=document.createElement("link");t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",B(e)),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(t)},be=function(){for(var e=le(),t=e.length-1;t>=0;t--)if("Them"!==e[t].author)return e[t]},ye=function(e){var t;try{t=JSON.parse(e.triggerJson)}catch(e){return}if(!t||!t.triggers||0===t.triggers.length)return void i("[setupTriggers] No triggers to show.");var a=t.minDelay||0===t.minDelay?0:60;t=t.triggers,t.sort(function(e,t){return e.after>t.after?1:e.after<t.after?-1:0}),i("[setupTriggers] Triggers configured: %o",t);var s,n=document.URL.slice(window.location.protocol.length+2);e:for(var r=0;r<t.length;r++)if(i("[setupTriggers] Looking at trigger: %o",t[r]),!0===t[r].enabled)for(var l=0;l<t[r].on.length;l++){var c=t[r].on[l].replace(/^https?:\/\//,"");if(""!==c)switch(i("[setupTriggers] Comparing filter '%s' to: '%s' (match behavior '%s')",c,n,t[r].matchType),t[r].matchType){case"startsWith":var h=new RegExp("^"+c);if(h.test(n)){i("[setupTriggers] '%s' matched (starts with)",c),s=t[r];break e}break;case"exact":if(n===c){i("[setupTriggers] '%s' matched (exact match)",c),s=t[r];break e}break;case"contains":default:if(-1!==n.indexOf(c)){i("[setupTriggers] '%s' matched (is contained)!",c),s=t[r];break e}}}else i("[setupTriggers] Trigger '%s' is disabled, skipping",t[r].uid);if(s){var m=/^(\d*):/;i("[setupTriggers] Setting up trigger '%s' to run at %o (in %dsec): %o",s.uid,new Date(Date.now()+1e3*s.after),s.after,s),clearTimeout(S),S=setTimeout(function(){if(i("[setupTriggers, timer] Running: %o",s.uid),!_chatlio.isOnline()||!_chatlio.isShown())return void i("[setupTriggers, timer] Slack team is not online or the widget is hidden. Not showing trigger.");if(he())return void i("[setupTriggers, timer] Widget is expanded. Not showing trigger.");var e=o.getItem(y)||"";if(e&&-1!==e.indexOf(s.uid))return void i("[setupTriggers, timer] Trigger ran already. Not showing trigger.");var t=e.match(m);if(t&&2===t.length&&(t=new Date(Number(t[1])),Date.now()-t<6e4*a))return void i("[setupTriggers, timer] last trigger ran at: %o, %d sec ago. Too soon: min delay is %d min. Not showing trigger.",t,(Date.now()-t)/1e3,a);if(ce(be(),60))return void i("[setupTriggers, timer] Ongoing chat: last message was < 60 min ago. Not showing trigger.");e+=s.uid+",";var n=Date.now()+":";t?e.replace(m,n):e=n+e,o.setItem(y,e),i("[setupTriggers, timer] Showing triggered message '%s'",s.message),F("trigger",s)},1e3*s.after)}},Se=function(){if(ne("https://api.chatlio.com/v1/v/visitor/m",{verb:"POST",data:{page:document.URL}}),N&&""!==N){clearTimeout(S);var e=JSON.parse(N);ye(e)}};window.addEventListener("popstate",function(){Se()});var Ce=function(e,t,a){var s,i,n,r,o=0;a||(a={});var l=function(){o=!1===a.leading?0:Date.now(),s=null,r=e.apply(i,n),s||(i=n=null)};return function(){var c=Date.now();o||!1!==a.leading||(o=c);var h=t-(c-o);return i=this,n=arguments,h<=0||h>t?(s&&(clearTimeout(s),s=null),o=c,r=e.apply(i,n),s||(i=n=null)):s||!1===a.trailing||(s=setTimeout(l,h)),r}}(function(){ne("https://api.chatlio.com/v1/p/visitor/"+X.vsUuid()+"/typing",{data:null})},1500),Te=function(e){ne("https://api.chatlio.com/v1/p/visitor/message/ack/"+e)},Ne=function(){if(f=!1,F("offline"),n.isShown()&&N){var e=JSON.parse(N);e.connecting=!0,e.expanded=he(),de(e),N=JSON.stringify(e)}},Ie=function(){var e={authEndpoint:"https://api.chatlio.com/v1/v/visitor/auth",auth:{headers:{Authorization:"Bearer "+X.getItem(d)}},encrypted:!0,authTransport:"ajax",disableStats:!0};T=new Pusher("7fc2084f5bc6a21f2dfe",e),T.connection.bind("failed",function(){console.error("No native WebSockets and no working fallback (Flash, http)")}),T.connection.bind("unavailable",function(){console.warn("Connection unavailable. Reconnecting in 10 seconds."),Ne()}),T.connection.bind("disconnected",function(){Ne()})},Ue=function(){if(void 0===T)Ie();else if(T.channels.channels["presence-"+X.vsUuid()])return;T.subscribe("presence-"+X.vsUuid()).bind("pusher:subscription_succeeded",function(){})},ke=function(e,t,a,s,i,n){oe(function(){void 0===T&&Ie(),T.channels.channels["private-"+X.vsUuid()]||(I=T.subscribe("private-"+X.vsUuid()),I.bind("new_message",function(t){g||_chatlio.show({expanded:!0}),Te(t.ts),e(t),F("messageReceived",t)}),I.bind("user_typing",t),I.bind("service_messages",function(e){switch(e.type){case"screenshot":if(!k){z("https://w.chatlio.com/v4/vendor/html2canvas-0.4.1.min.5330312b.js",function(){k="function"==typeof window.html2canvas})}a(e);break;case"conversation-end":n(e);break;case"request-info":s(e);break;case"no-answer":i(e);break;default:console.warn("Unhandled service message type: %s",e.type)}})),Ue()})},Ae=function(e,t){t=t||{};var a={vsUuid:X.vsUuid(),currentPage:document.URL,message:e.slice(0,5e3)};t.isOfflineMsg?a.isOfflineMsg=!0:t.tUid&&(a.tUid=t.tUid),ne("https://api.chatlio.com/v1/v/visitor/message/new",{verb:"POST",data:a,failure:function(){console.warn("There was a problem sending the message to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})},Oe=5;n={version:function(){return{widget:"7c5e6ca-1530640258618",loader:e}},vsUuid:X.vsUuid,token:function(){return X.getItem(m)},messages:le,page:Se,reset:function(e){e=e||{},e.chatlioScriptTagId=e.chatlioScriptTagId||"chatlio-widget-embed";var t=document.getElementById(e.chatlioScriptTagId);return t?(te&&te.isOpen()&&(fe=0,te.close()),ae(e),C.parentNode.removeChild(C),this.init(t)):(console.warn("No script node with ID %s",e.chatlioScriptTagId),this)},init:function(e){return C=H(e),C&&(N=null,we()),this},identify:function(){var e,t={};if(Array.isArray(arguments[0])?"object"==typeof arguments[0][0]?(e=arguments[0][0][0],t=arguments[0][0][1]||{}):(e=arguments[0][0],t=arguments[0][1]||{}):(e=arguments[0],t=arguments[1]||{}),Object.keys(t).forEach(function(e){var a=t[e];void 0!==a&&null!==a?t[e]=String(a):"name"!==e&&"email"!==e||delete t[e]}),P={userId:e,traits:t},P.traits.email&&(o.setItem(b,!0),g&&N)){var a=JSON.parse(N);!a.requireInfo&&f||(a.expanded=he(),de(a))}return ne("https://api.chatlio.com/v1/p/visitor/identify",{data:"vsUuid="+X.vsUuid()+"&ceUuid="+c+"&userId="+encodeURIComponent(e)+"&traits="+encodeURIComponent(JSON.stringify(t)),failure:function(){Oe>0?(setTimeout(function(){window._chatlio.identify(e,t)},q),Oe--):console.warn("Oh noes! There was a problem identifying the current user to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}}),this},track:function(){return this},isShown:function(){return g},isOnline:function(){return f},show:function(e){if(e=e||{},e.hasOwnProperty("expanded")&&(F("mounted"),!0===e.expanded?o.setItem(E,"false"):!1===e.expanded&&o.setItem(E,"true")),g=!0,C.style.display="block",N){var t=JSON.parse(N);t.expanded=he(),de(t)}return this},hide:function(){return g=!1,C.style.display="none",this},configure:function(e){return e?(u=Array.isArray(e)&&e[0]&&"object"==typeof e[0][0]?e[0][0]:e,u.hasOwnProperty("timeLocale")&&(J=u.timeLocale,delete u.timeSinceStrings),u.hasOwnProperty("debug")&&(this.debug(u.debug),delete u.debug),u.hasOwnProperty("autoResponseMessage")&&F("clear-trigger"),pe(N,null,!0),this):(console.warn("_chatlio.configure called without data"),this)},send:function(e){Array.isArray(e)&&(e=e&&e[0]&&e[0][0]);var t=C.getElementsByTagName("TEXTAREA");if(!t||!t[0])return console.log("[_chatlio.send] Can't send: no widget?"),this;t=t[0],t.value=e;var a=new KeyboardEvent("keydown",{keyCode:13,bubbles:!0,cancelable:!0,detail:740});return t.dispatchEvent(a),this},debug:function(e){return s=e,this},switchWidget:function(e){return!e||e.length<36?(i("[switchWidget] Invalid widget ID '%s'",e),this):(i("[switchWidget] Switching to '%s'",e),j&&(i("[switchWidget] Updating attribute on script node %o",j),j.setAttribute("data-widget-id",e)),c=e,this.reset())},clearHistory:function(){return i("[clearHistory] Clearing chat history for visitor '%s'",this.vsUuid()),q=2e4,o.removeItem(w),pe(N,{clearHistory:!0},!0),this}};var qe=function(){clearTimeout(U),q<9e4&&(q+=1e3),U=setTimeout(qe,q),R&&ne("https://api-cdn.chatlio.com/v1/p/chat_endpoints/"+c,{data:null,dontSendAuthToken:!0,failure:function(){f&&Ne()},success:function(){A&&pe(this.responseText)}})},Re=function(){if(!window._chatlio)return void console.warn("No _chatlio object on root");var e;try{e=JSON.parse(JSON.stringify(window._chatlio))}catch(e){return void console.warn("Invalid API call: ",e)}window._chatlio=n,e&&e.length>0&&e.forEach(function(e){e.constructor!==Array&&console.warn("Invalid chatlio api call: %o",e);var t=e.shift();n[t]||console.warn("Unknown chatlio api call: '%s'",String(t));var a=e.shift(),s=[];for(var i in a)s.push(a[i]);n[t].apply(n,s)})},_e=function(){},Me=function(){document.hidden?R=!1:(R=!0,q=2e4,_e(),qe())},Le=function(){z("https://w.chatlio.com/v4/vendor/tinycon.min.06c92f12.js",function(){window.Tinycon&&(Tinycon.setOptions({shape:"disc",rad:12}),Tinycon.setBubble(l),_e=function(){l>0&&g&&(l=0,Tinycon.setBubble(l))},window.onfocus=function(){R=!0,_e()},window.onblur=function(){R=!1})})};!function(){if(p.forceRequireLoad){var e=0,a=function(){se()?require(r,function(e){if(Y(e))t=e;else{if(!Y(window.ChatlioReact))return void console.warn("Forced require() loading React failed. Contact Chatlio support: support@chatlio.com");t=window.ChatlioReact}we()}):e<10?(e++,setTimeout(a,500)):console.warn("Waiting for require() to appear. Contact Chatlio support: support@chatlio.com")};a()}else if(se()&&!0!==p.skipRequireLoad&&"undefined"==typeof Ember)require(r,function(e){if(Y(e))t=e;else{if(!Y(window.ChatlioReact))return void console.warn("require() loading React failed. Contact Chatlio support: support@chatlio.com");t=window.ChatlioReact}we()});else{var s=0,i=function(){if(++s===r.length){if(!Y(window.ChatlioReact))return void console.warn("Loading React failed. Contact Chatlio support: support@chatlio.com");t=window.ChatlioReact,we()}};r.forEach(function(e){z(e,i)})}}(),Ee(O),p.embedSidebar&&Ee("https://w.chatlio.com/v4/sidebar.1151ed33.css"),z("https://w.chatlio.com/v4/vendor/emojione-1.4.1.min.2f0e13b4.js"),function(){if("matchMedia"in window){var e=window.matchMedia("(max-width:480px)"),t=function(e){_=!!e.matches};e.addListener(t),t(e)}}();var Pe=function(e){document.addEventListener("visibilitychange",Me);var s,i=/^(\w[\w-+]*(?:\.[\w-+]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,63}(?:\.[a-z]{2})?)$/i,n=function(e){return i.test(e)},r=function(e){if(!window.emojione||0===e.length)return e;window.emojione.ascii=!0,e=window.emojione.shortnameToImage(e.replace(/:(simple_smile|slightly_smiling_face):/gim,":grinning:"));for(var t,a=e,s=/<img.*?src="([^">]*\/([^">]*?))".*?>/g,i=/<img.*?.*?>/;t=s.exec(e);){var n=t[1],r="";n=n.substr(n.lastIndexOf("/")+1).split(".")[0];for(var o in window.emojione.emojioneList)if(-1!==window.emojione.emojioneList[o].indexOf(n.toLowerCase())){r=o;break}a=a.replace(i,r)}return a},h=/(&lt;|<)(#C|@U|!).*?(&gt;|>)/gm,m=/<((http:\/\/|https:\/\/|mailto:|tel:).*?)>/gm,d=function(e,t){var a=t.split("|");return'<a target="_blank" href="'+a[0]+'">'+B(a[1]||a[0])+"</a>"},u=/(```([^`]*)```)/gm,f=/(`([^`]*)`)/gm,y=/\s(\*(\w+)\*)\s?/gm,S=/\s(_(\w+)_)\s?/gm,T=function(e){return""===e||void 0===e?e:r(e).replace(h,"").replace(m,d).replace(u,"<pre>$2</pre>").replace(f,"<code>$2</code>").replace(y," <strong>$2</strong> ").replace(S," <em>$2</em> ")},N=t.addons.CSSTransitionGroup,I=t.createClass({displayName:"FileUpload",render:function(){return-1===this.props.fileUploadProgress?t.createElement("div",{className:"chatlio-file-upload-progress"},"File upload failed, file too big?"):t.createElement("div",null,this.props.fileUploading?t.createElement("div",{className:"chatlio-file-upload-progress"},t.createElement("progress",{max:100,value:this.props.fileUploadProgress})):null)}}),k=t.createClass({displayName:"MessageInput",getInitialState:function(){return{renderSubmit:!1,submitEnabled:!1}},mq:void 0,mqHandler:function(e){var t=!1;e.matches&&(t=!0),this.setState({renderSubmit:t})},componentDidMount:function(){"matchMedia"in window&&(this.mq=window.matchMedia("(max-width:480px)"),this.mq.matches&&this.mqHandler(this.mq),this.mq.addListener(this.mqHandler))},componentWillUnmount:function(){this.mq&&"matchMedia"in window&&this.mq.removeListener(this.mqHandler)},propTypes:{minRows:t.PropTypes.number.isRequired,maxRows:t.PropTypes.number.isRequired},resizeTextArea:function(){for(var e=this.refs.ta;e.rows>this.props.minRows&&e.scrollHeight<=e.offsetHeight;)e.rows--;if(!(e.rows>=this.props.maxRows))for(var t=0;e.scrollHeight>e.offsetHeight&&t!==e.offsetHeight;)t=e.offsetHeight,e.rows++},onChange:function(e){e.target.value.length>0?this.setState({submitEnabled:!0}):this.setState({submitEnabled:!1})},onClick:function(e){this.setState({submitEnabled:!1}),this.props.sendMessage(e)},render:function(){if(this.props.meta.connecting)return t.createElement("div",{className:"chatlio-new-message-container"},t.createElement("textarea",{rows:"1",className:"chatlio-new-message chatlio-connecting",disabled:"true",placeholder:"Connecting to Chatlio. Please wait..."}));var e,a="chatlio-new-message-container",s="chatlio-new-message";if(!0===this.props.meta.whiteLabel&&(a+=" chatlio-white-label"),this.state.renderSubmit){var i="chatlio-btn-send";this.state.submitEnabled||(i+=" chatlio-btn-send-disabled"),e=t.createElement("div",{className:"chatlio-btn-container"},t.createElement("a",{onClick:this.onClick,className:i},this.props.meta.defaultSendBtnLabel)),a="chatlio-new-message-container-small",s="chatlio-new-message-small"}return t.createElement("div",{className:a},t.createElement("textarea",{ref:"ta",rows:this.props.minRows,onKeyDown:this.props.sendMessage,onKeyUp:this.resizeTextArea,onChange:this.onChange,className:s,placeholder:this.props.meta.onlineMessagePlaceholder}),e)}}),A=t.createClass({displayName:"TypingIndicator",render:function(){if(!this.props.userTyping)return null;if(this.props.needAvatar){var e;return this.props.teamAvatarOn&&this.props.teamAvatarUrl?e=t.createElement("img",{src:this.props.teamAvatarUrl}):this.props.msg&&this.props.msg.avatarUrl&&this.props.msg.avatarUrl.length>5&&this.props.showSlackAvatar?e=t.createElement("img",{src:this.props.msg.avatarUrl}):"You"!==this.props.msg.author&&(e=t.createElement("img",{src:"https://w.chatlio.com/v4/images/agent.1d8be3a2.png"})),t.createElement("div",{className:"chatlio-message chatlio-clear"},t.createElement("div",{className:"chatlio-message-header"},t.createElement("div",{className:"chatlio-message-avatar"},e),t.createElement("div",{className:"typing-indicator chatlio-clear"},t.createElement("span",null),t.createElement("span",null),t.createElement("span",null))))}return t.createElement("div",{className:"chatlio-message chatlio-clear"},t.createElement("div",{className:"chatlio-message-content"},t.createElement("div",{className:"typing-indicator"},t.createElement("span",null),t.createElement("span",null),t.createElement("span",null))))}}),O=t.createClass({displayName:"ChatMessageHeader",render:function(){var e;return this.props.teamAvatarOn?e=this.props.teamAvatarUrl?t.createElement("img",{src:this.props.teamAvatarUrl}):t.createElement("img",{src:"https://w.chatlio.com/v4/images/agent.1d8be3a2.png"}):this.props.msg&&this.props.msg.avatarUrl&&this.props.msg.avatarUrl.length>5&&this.props.showSlackAvatar?e=t.createElement("img",{src:this.props.msg.avatarUrl}):"You"!==this.props.msg.author&&(e=this.props.showTeamAvatarPreChat&&this.props.teamAvatarUrl?t.createElement("img",{src:this.props.teamAvatarUrl}):t.createElement("img",{src:"https://w.chatlio.com/v4/images/agent.1d8be3a2.png"})),t.createElement("div",{className:"chatlio-message-header"},t.createElement("div",{className:"chatlio-message-author-tiny"},this.props.msg.author),t.createElement("div",{className:"chatlio-message-avatar"},e))}}),x=t.createClass({displayName:"AttachedFile",render:function(){var e=this.props.attachedFile.thumb360?t.createElement("img",{className:"chatlio-file-attachment",src:this.props.attachedFile.thumb360}):"",a="chatlio-message chatlio-message-";return a+="You"===this.props.msg.author?"from-me":"from-them",t.createElement("div",{className:a},this.props.needAvatar?t.createElement(O,{msg:this.props.msg,teamAvatarOn:this.props.teamAvatarOn,teamAvatarUrl:this.props.teamAvatarUrl,showSlackAvatar:this.props.showSlackAvatar,browserSideAuthorLabel:this.props.browserSideAuthorLabel}):null,t.createElement("div",{className:"chatlio-message-content"},t.createElement("a",{href:this.props.attachedFile.url,target:"_blank"},e,t.createElement("div",{className:"chatlio-clear"}),t.createElement("div",{className:"chatlio-file-attachment-title"},this.props.attachedFile.title))))}}),D=t.createClass({displayName:"RequestScreenshot",render:function(){return this.props.screenshot?t.createElement("div",{className:"chatlio-inline-dialog chatlio-screenshot-request"},t.createElement("p",null,this.props.text),t.createElement("div",null,t.createElement("button",{onClick:this.props.screenshot.dismiss,className:"chatlio-btn chatlio-btn-dismiss"},this.props.declineLabel),t.createElement("button",{onClick:this.props.screenshot.send,className:"chatlio-btn chatlio-btn-send"},this.props.allowLabel))):null}}),W=t.createClass({displayName:"EnterInfo",getInitialState:function(){return{email:"",name:"",emailError:!1}},sendRequiredInfo:function(){o.setItem(b,!0),window._chatlio.identify(P.userId,{email:this.state.email,name:this.state.name}),this.props.enteredRequiredInfo()},handleChange:function(e){var t=this.state||{};t[e.target.name]=e.target.value,this.isValidInput(t)?t.emailError=!1:t.emailError=!0,this.setState(t)},handleKeyDown:function(e){if(this.isValidInput(this.state)&&13===e.keyCode)return void this.sendRequiredInfo()},isValidInput:function(e){return!e.hasOwnProperty("email")||(""===e.email||n(e.email))},render:function(){return t.createElement("div",{className:"chatlio-widget-body "+this.props.widgetViewState},t.createElement("div",null,t.createElement("div",{className:"chatlio-offline-message-container"},t.createElement("p",{className:"chatlio-missed-you-message"},this.props.meta.requireInfoGreeting),t.createElement("input",{type:"text",name:"email",onKeyDown:this.handleKeyDown,onChange:this.handleChange,className:this.state.emailError?"error":"",placeholder:this.props.meta.offlineEmailPlaceholder}),t.createElement("input",{type:"text",name:"name",onKeyDown:this.handleKeyDown,onChange:this.handleChange,placeholder:this.props.meta.offlineNamePlaceholder}),t.createElement("button",{className:"chatlio-btn",onClick:this.sendRequiredInfo,disabled:this.state.emailError||""===this.state.email},this.props.meta.requireInfoSubmitBtn))))}}),H=t.createClass({displayName:"RequestInfo",handleChange:function(e){var t=this.state||{};t[e.target.name]=e.target.value,this.setState(t)},handleKeyDown:function(e){if(13===e.keyCode)return void this.sendRequestInfo()},sendRequestInfo:function(){var e=!1;for(var t in this.state)if(this.state.hasOwnProperty(t)){e=!0;break}e&&(window._chatlio.identify(P.userId,this.state),this.props.requestInfo.send(this.state),setTimeout(function(){this.replaceState({})}.bind(this),0))},titleCaseize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},render:function(){if(!this.props.requestInfo)return null;var e=this;return t.createElement("div",{className:"chatlio-inline-dialog "},this.props.requestInfo.fields.map(function(a){var s=a.toLowerCase().trim().replace(/&/g,"-and-").replace(/[\s\W-]+/g,"-").replace(/-$/,""),i=a.replace(/\w\S*/g,e.titleCaseize);return t.createElement("input",{name:s,placeholder:i,onChange:e.handleChange,onKeyDown:e.handleKeyDown,type:"text"})}),t.createElement("div",null,t.createElement("button",{onClick:this.props.requestInfo.dismiss,className:"chatlio-btn chatlio-btn chatlio-btn-dismiss"},this.props.denyLabel),t.createElement("button",{onClick:this.sendRequestInfo,className:"chatlio-btn chatlio-btn chatlio-btn-send"},this.props.sendLabel)))}}),j=t.createClass({displayName:"ChatMessage",render:function(){var e=this.props.msg.body||"";window.emojione&&(window.emojione.ascii=!0,e=window.emojione.shortnameToImage(e));var a=1e3*this.props.msg.ts>Date.now()-500,s="chatlio-message chatlio-message-";s+="You"===this.props.msg.author?"from-me":"from-them";var i="chatlio-message-content";return e.indexOf("<pre>")>-1?(e=e.replace(/<br\/>/gm,""),i+=" chatlio-message-content-code"):e=e.replace(/\n/gm,"\n<br/>"),t.createElement("div",{className:s},this.props.needAvatar?t.createElement(O,{msg:this.props.msg,teamAvatarOn:this.props.teamAvatarOn,teamAvatarUrl:this.props.teamAvatarUrl,showSlackAvatar:this.props.showSlackAvatar,showAvatarPreChat:this.props.showAvatarPreChat,showTeamAvatarPreChat:this.props.showTeamAvatarPreChat,browserSideAuthorLabel:this.props.browserSideAuthorLabel}):null,t.createElement("div",{className:i},t.createElement(N,{transitionName:"chatlio-fade-in-message-body",transitionAppear:a,transitionEnterTimeout:5e3,transitionLeaveTimeout:5e3,transitionAppearTimeout:5e3},this.props.msg.bodyComponent?t.createElement("span",{className:"chatlio-message-body"},this.props.msg.bodyComponent):t.createElement("span",{className:"chatlio-message-body",dangerouslySetInnerHTML:{__html:e}
}))),this.props.threadEnd?t.createElement("div",{className:"chatlio-message-timestamp"},V(1e3*this.props.msg.ts)):"")}}),J=t.createClass({displayName:"WidgetOverlay",render:function(){return t.createElement("div",{className:"chatlio-widget-overlay"},this.props.children)}}),Y=t.createClass({displayName:"AnimatedLoaderWithCheckmark",render:function(){var e="",a="";return"complete"===this.props.status&&(e="chatlio-load-complete",a="chatlio-checkmark-show"),t.createElement("div",null,this.props.status?t.createElement("div",{className:"chatlio-circle-loader "+e},t.createElement("div",{className:"chatlio-checkmark chatlio-draw "+a})):t.createElement("span",null,this.props.text))}}),Z=t.createClass({displayName:"RateConversation",getInitialState:function(){return{conversationRated:!1}},rateChat:function(e){var t=this;ne("https://api.chatlio.com/v1/v/visitor/rate_chat/"+e,{verb:"POST",success:function(){t.setState({conversationRated:!0})},onerror:function(){console.warn("There was a problem sending your rating to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})},chatFeedback:function(){var e=this;e.setState({feedbackSendingStatus:"loading"}),ne("https://api.chatlio.com/v1/v/visitor/chat_feedback",{verb:"POST",data:{feedback:document.getElementById("chatlio-feedback-textarea").value},success:function(){e.setState({feedbackSendingStatus:"complete"})},onerror:function(){e.setState({feedbackSendingStatus:""}),console.warn("There was a problem sending your feedback. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})},render:function(){var e="chatlio-feedback-container";return"complete"===this.state.feedbackSendingStatus&&(e+=" chatlio-feedback-container-closed"),this.props.meta.showConversationRating?t.createElement("div",null,this.state.conversationRated?t.createElement("div",{className:"chatlio-conversation-rating"},this.props.conversationRatingThankYou,t.createElement("div",null,t.createElement("div",{className:e},t.createElement("textarea",{id:"chatlio-feedback-textarea",placeholder:this.props.meta.conversationRatingPlaceholder,className:"chatlio-conversation-rating-textarea"})),t.createElement("button",{disabled:"complete"===this.state.feedbackSendingStatus,className:"chatlio-btn",onClick:this.chatFeedback},t.createElement(Y,{text:this.props.meta.defaultSendBtnLabel,status:this.state.feedbackSendingStatus})))):t.createElement("div",{className:"chatlio-conversation-rating"},this.props.meta.conversationRatingLabel,t.createElement("div",{className:"chatlio-conversation-rating-icons"},t.createElement("svg",{onClick:this.rateChat.bind(this,"up"),className:"chatlio-thumbs-up-icon",width:"40",height:"40",viewBox:"0 0 20 20"},t.createElement("path",{d:"M18.916 11.208c0.443-0.511 0.695-1.355 0.695-2.159 0-0.531-0.115-0.996-0.333-1.345-0.284-0.454-0.738-0.704-1.278-0.704h-2.618c1.425-2.591 1.785-4.543 1.070-5.807-0.499-0.881-1.413-1.193-2.045-1.193-0.25 0-0.462 0.185-0.495 0.433-0.179 1.319-1.188 2.893-2.768 4.318-1.514 1.365-3.374 2.456-5.286 3.11-0.241-0.508-0.758-0.86-1.356-0.86h-3c-0.827 0-1.5 0.673-1.5 1.5v9c0 0.827 0.673 1.5 1.5 1.5h3c0.634 0 1.176-0.395 1.396-0.952 1.961 0.246 2.699 0.64 3.414 1.022 0.895 0.478 1.739 0.93 4.503 0.93 0.72 0 1.398-0.188 1.91-0.529 0.5-0.333 0.82-0.801 0.926-1.343 0.399-0.162 0.753-0.536 1.024-1.092 0.264-0.541 0.435-1.232 0.435-1.761 0-0.099-0.006-0.19-0.017-0.274 0.253-0.186 0.48-0.473 0.667-0.851 0.27-0.545 0.432-1.228 0.432-1.826 0-0.424-0.079-0.777-0.234-1.051-0.013-0.022-0.026-0.044-0.039-0.065zM4.5 18h-3c-0.276 0-0.5-0.224-0.5-0.5v-9c0-0.276 0.224-0.5 0.5-0.5h3c0.276 0 0.5 0.224 0.5 0.5v8.999c0 0 0 0.001 0 0.001-0 0.276-0.224 0.5-0.5 0.5zM18.339 10.274c-0.151 0.304-0.304 0.414-0.37 0.414-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0.042 0 0.072 0 0.117 0.078 0.066 0.117 0.104 0.32 0.104 0.558 0 0.445-0.126 0.974-0.328 1.382-0.198 0.399-0.399 0.544-0.487 0.544-0.276 0-0.5 0.224-0.5 0.5 0 0.177 0.092 0.333 0.231 0.422 0.031 0.317-0.117 1.165-0.501 1.718-0.145 0.209-0.298 0.329-0.418 0.329-0.276 0-0.5 0.224-0.5 0.5 0 0.88-0.972 1.281-1.875 1.281-2.513 0-3.217-0.376-4.032-0.812-0.762-0.407-1.618-0.865-3.781-1.134v-8.187c2.101-0.689 4.152-1.877 5.812-3.373 1.593-1.436 2.639-2.988 2.994-4.426 0.272 0.087 0.579 0.271 0.776 0.618 0.334 0.59 0.584 2.096-1.493 5.557-0.093 0.154-0.095 0.347-0.006 0.504s0.255 0.254 0.435 0.254h3.483c0.199 0 0.327 0.070 0.43 0.234 0.117 0.187 0.181 0.477 0.181 0.815 0 0.424-0.102 0.882-0.272 1.225z",fill:"#000000"})),t.createElement("svg",{onClick:this.rateChat.bind(this,"down"),className:"chatlio-thumbs-up-icon",width:"40",height:"40",viewBox:"0 0 20 20"},t.createElement("path",{d:"M18.916 8.792c0.443 0.511 0.695 1.355 0.695 2.159 0 0.531-0.115 0.996-0.333 1.345-0.284 0.454-0.738 0.704-1.278 0.704h-2.618c1.425 2.591 1.785 4.543 1.070 5.807-0.499 0.881-1.413 1.193-2.045 1.193-0.25 0-0.462-0.185-0.495-0.433-0.179-1.319-1.188-2.893-2.768-4.318-1.514-1.365-3.374-2.456-5.286-3.11-0.241 0.508-0.758 0.86-1.356 0.86h-3c-0.827 0-1.5-0.673-1.5-1.5v-9c0-0.827 0.673-1.5 1.5-1.5h3c0.634 0 1.176 0.395 1.396 0.952 1.961-0.246 2.699-0.64 3.414-1.022 0.895-0.478 1.739-0.93 4.503-0.93 0.72 0 1.398 0.188 1.91 0.529 0.5 0.333 0.82 0.801 0.926 1.343 0.399 0.162 0.753 0.536 1.024 1.092 0.264 0.541 0.435 1.232 0.435 1.761 0 0.099-0.006 0.19-0.017 0.274 0.253 0.186 0.48 0.473 0.667 0.851 0.27 0.545 0.432 1.228 0.432 1.826 0 0.424-0.079 0.777-0.234 1.051-0.013 0.022-0.026 0.044-0.039 0.065zM4.5 2h-3c-0.276 0-0.5 0.224-0.5 0.5v9c0 0.276 0.224 0.5 0.5 0.5h3c0.276 0 0.5-0.224 0.5-0.5v-8.999c0-0 0-0.001 0-0.001-0-0.276-0.224-0.5-0.5-0.5zM18.339 9.726c-0.151-0.304-0.304-0.414-0.37-0.414-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5c0.042 0 0.072 0 0.117-0.078 0.066-0.117 0.104-0.32 0.104-0.558 0-0.445-0.126-0.974-0.328-1.382-0.198-0.399-0.399-0.544-0.487-0.544-0.276 0-0.5-0.224-0.5-0.5 0-0.177 0.092-0.333 0.231-0.422 0.031-0.317-0.117-1.165-0.501-1.718-0.145-0.209-0.298-0.329-0.418-0.329-0.276 0-0.5-0.224-0.5-0.5 0-0.88-0.972-1.281-1.875-1.281-2.513 0-3.217 0.376-4.032 0.812-0.762 0.407-1.618 0.865-3.781 1.134v8.187c2.101 0.689 4.152 1.877 5.812 3.373 1.593 1.436 2.639 2.988 2.994 4.426 0.272-0.087 0.579-0.271 0.776-0.618 0.334-0.59 0.584-2.096-1.493-5.557-0.093-0.154-0.095-0.347-0.006-0.504s0.255-0.254 0.435-0.254h3.483c0.199 0 0.327-0.070 0.43-0.234 0.117-0.187 0.181-0.477 0.181-0.815 0-0.424-0.102-0.882-0.272-1.225z",fill:"#000000"}))))):t.createElement("div",null)}}),K=t.createClass({displayName:"ConfirmConversationEnd",render:function(){return t.createElement("div",{className:"chatlio-confirm-conversation-end"},t.createElement("div",null,this.props.meta.conversationEndConfirmationQuestion),t.createElement("div",{className:"chatlio-confirm-conversation-end-actions"},t.createElement("a",{onClick:this.props.onConversationEnd.bind(this,!0)},t.createElement("span",null,this.props.meta.defaultYesBtnLabel)),t.createElement("a",{onClick:this.props.cancelConfirmConversationEnd},t.createElement("span",null,this.props.meta.defaultCancelBtnLabel))))}}),$=t.createClass({displayName:"ConversationEnd",getInitialState:function(){return{}},requestTranscript:function(){var e=this,t=document.getElementById("chatlio-transcript-email").value;n(t)?(e.setState({transcriptStatus:"loading"}),ne("https://api.chatlio.com/v1/v/visitor/transcript",{verb:"POST",data:{email:t},success:function(){e.setState({transcriptStatus:"complete"})},onerror:function(){e.setState({transcriptStatus:""}),console.warn("There was a problem requesting your transcript. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})):this.setState({invalidTranscriptEmail:!0})},transcriptEmailChange:function(e){n(e.target.value)&&this.setState({invalidTranscriptEmail:!1})},render:function(){var e="";this.state.invalidTranscriptEmail&&(e="error");var a="chatlio-transcript-email-form";return"complete"===this.state.transcriptStatus&&(a+=" chatlio-transcript-email-form-closed"),t.createElement("div",{className:"chatlio-conversation-end"},t.createElement("p",null,this.props.meta.conversationEndLabel),t.createElement(Z,t.__spread({},this.props)),t.createElement("div",{className:a},t.createElement("div",null,t.createElement("label",{className:"chatlio-transcript-email-input-label"},t.createElement("input",{id:"chatlio-transcript-email",onChange:this.transcriptEmailChange.bind(this),placeholder:this.props.meta.conversationEndTranscriptPlaceholder,type:"text",className:"chatlio-transcript-email-input "+e})),t.createElement("button",{disabled:"complete"===this.state.transcriptStatus,className:"chatlio-btn chatlio-conversation-end-transcript-send-btn",onClick:this.requestTranscript},t.createElement(Y,{text:this.props.meta.defaultSendBtnLabel,status:this.state.transcriptStatus})))))}}),G=t.createClass({displayName:"ChatMessages",scrollToBottom:function(){var e=a.findDOMNode(this);e.scrollTop=e.scrollHeight},mediaquery:void 0,componentDidMount:function(){this.scrollToBottom(),"matchMedia"in window&&(this.mediaquery=window.matchMedia("(max-width:480px)"),this.mediaquery.addListener(this.scrollToBottom))},componentDidUpdate:function(){this.scrollToBottom()},componentWillUnmount:function(){this.mediaquery&&"matchMedia"in window&&this.mediaquery.removeListener(this.scrollToBottom)},headerMsg:function(){return{body:this.props.ephMsg?this.props.ephMsg.body:this.props.meta.autoResponseMessage,author:this.props.meta.agentLabel}},needHeader:function(){return!this.props.startChat},render:function(){var e,a=this,s=!0,i=!1;this.props.messages.length>0&&(s="You"===this.props.messages[this.props.messages.length-1].author);var n="chatlio-message-container";return this.props.meta.whiteLabel&&(n+=" chatlio-white-label"),t.createElement("div",{id:"chatlio-message-container",className:n},t.createElement("div",{className:"chatlio-message-scrollable"},this.needHeader()?t.createElement("span",null,t.createElement(j,{msg:this.headerMsg(),needAvatar:!0,threadEnd:!1,teamAvatarOn:this.props.meta.teamAvatarOn,teamAvatarUrl:this.props.meta.teamAvatarUrl,showSlackAvatar:this.props.meta.forwardSlackUserName,showAvatarPreChat:this.props.meta.showAvatarPreChat,showTeamAvatarPreChat:this.props.meta.showTeamAvatarPreChat,browserSideAuthorLabel:this.props.meta.browserSideAuthorLabel})):null,this.props.messages.map(function(s,n){if(e="You"!==s.author,i=!1,n>0){var r=a.props.messages[n-1];"You"!==s.author&&r.author!==s.author||(e=!1),a.props.messages[n+1]&&a.props.messages[n+1].author!==a.props.messages[n].author&&(i=!0)}return s.attachedFile?t.createElement(x,{msg:s,needAvatar:e,teamAvatarOn:a.props.meta.teamAvatarOn,teamAvatarUrl:a.props.meta.teamAvatarUrl,showSlackAvatar:a.props.meta.forwardSlackUserName,attachedFile:s.attachedFile,browserSideAuthorLabel:a.props.meta.browserSideAuthorLabel,key:n}):t.createElement(j,{msg:s,needAvatar:e,threadEnd:i,teamAvatarOn:a.props.meta.teamAvatarOn,teamAvatarUrl:a.props.meta.teamAvatarUrl,showSlackAvatar:a.props.meta.forwardSlackUserName,browserSideAuthorLabel:a.props.meta.browserSideAuthorLabel,key:n})}),t.createElement(A,{msg:this.headerMsg(),userTyping:this.props.userTyping,needAvatar:s,showSlackAvatar:this.props.meta.forwardSlackUserName,teamAvatarOn:this.props.meta.teamAvatarOn,teamAvatarUrl:this.props.meta.teamAvatarUrl}),t.createElement(D,{screenshot:this.props.requestScreenshot,text:this.props.meta.requestScreenshotText,allowLabel:this.props.meta.requestScreenshotAllowLabel,declineLabel:this.props.meta.requestScreenshotDeclineLabel}),t.createElement(H,{requestInfo:this.props.requestInfo,sendLabel:this.props.meta.defaultSendBtnLabel,denyLabel:this.props.meta.defaultCancelBtnLabel}),t.createElement(I,{fileUploading:this.props.fileUploading,fileUploadProgress:this.props.fileUploadProgress})))}}),Q=t.createClass({displayName:"ChatWidgetOnline",getInitialState:function(){return{fileUploading:!1}},dragenter:function(e){clearTimeout(s),this.props.showDropZone(),e.stopPropagation(),e.preventDefault()},dragover:function(e){clearTimeout(s),e.stopPropagation(),e.preventDefault()},dragleave:function(e){clearTimeout(s),s=setTimeout(this.props.hideDropZone,100),e.stopPropagation(),e.preventDefault()},drop:function(e){if(this.props.hideDropZone(),e.stopPropagation(),e.preventDefault(),0!==this.props.messages.length){this.setState({fileUploading:!0,fileUploadProgress:0});var t=e.dataTransfer,a=t.files,s=this;if(a&&a.length>=1){var i=new XMLHttpRequest;i.upload.addEventListener("progress",function(e){var t=parseInt(e.loaded/e.total*100);s.setState({fileUploadProgress:t})},!1);var n=new FormData;n.append("file",a[0]),n.append("vsUuid",X.vsUuid()),i.open("POST","https://api.chatlio.com/v1/p/visitor/upload",!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status?s.setState({fileUploading:!1,fileUploadProgress:0}):0===i.status&&s.setState({fileUploading:!1,fileUploadProgress:-1})},i.send(n)}}},render:function(){return t.createElement("div",{className:"chatlio-widget-body "+this.props.widgetViewState,onDragEnter:this.dragenter,onDragOver:this.dragover,onDrop:this.drop,onDragLeave:this.dragleave},t.createElement(G,t.__spread({},this.props,{fileUploading:this.state.fileUploading,fileUploadProgress:this.state.fileUploadProgress})),t.createElement(k,t.__spread({},this.props,{minRows:1,maxRows:5})),this.props.showConfirmConversationEnd?t.createElement(J,null,t.createElement(K,t.__spread({},this.props))):"",this.props.conversationEnded&&this.props.meta.showConversationEnd?t.createElement(J,null,t.createElement($,t.__spread({},this.props))):"")}}),te=t.createClass({displayName:"ChatWidgetOffline",getInitialState:function(){return{email:P.traits.email||"",name:P.traits.name||"",message:"",locked:!1}},componentWillReceiveProps:function(){this.state.locked||(P.traits.email&&P.traits.email.length>1&&this.setState({email:P.traits.email,emailError:!1}),P.traits.name&&P.traits.name.length>1&&this.setState({name:P.traits.name,nameError:!1}))},handleChange:function(e){var t={};t[e.target.name]=e.target.value,!n(this.state.email)&&this.state.email&&0!==this.state.email.length||(t.emailError=!1),this.state.message.length>0&&(t.messageError=!1),(t.email&&t.email.length>1||t.name&&t.name.length>1)&&(t.locked=!0),this.setState(t)},sendOfflineMsg:function(){this.setState({emailError:!1,messageError:!1}),this.state.message=document.getElementById("chatlio-offline-message").value,n(this.state.email)||this.setState({emailError:!0}),this.state.message.length<1&&this.setState({messageError:!0}),!n(this.state.email)||this.state.message.length<1||(this.setState({offlineMessageSent:!0}),Ae([this.state.name,this.state.email,this.state.message].join("\n"),{isOfflineMsg:!0}))},render:function(){return t.createElement("div",{className:"chatlio-widget-body "+this.props.widgetViewState},t.createElement("div",null,this.state.offlineMessageSent?t.createElement("div",{className:"chatlio-offline-message-container-sent"},t.createElement("div",null,this.props.meta.offlineThankYouMessage)):t.createElement("div",{className:"chatlio-offline-message-container"},t.createElement("p",{className:"chatlio-missed-you-message",dangerouslySetInnerHTML:{__html:this.props.meta.offlineGreeting}}),t.createElement("input",{name:"email",value:this.state.email,type:"text",onChange:this.handleChange,className:this.state.emailError?"error":"",placeholder:this.props.meta.offlineEmailPlaceholder}),t.createElement("textarea",{id:"chatlio-offline-message",name:"message",className:this.state.messageError?"error":"",rows:"3",onChange:this.handleChange,placeholder:this.props.meta.offlineMessagePlaceholder}),t.createElement("input",{name:"name",type:"text",value:this.state.name,onChange:this.handleChange,placeholder:this.props.meta.offlineNamePlaceholder}),t.createElement("button",{className:"chatlio-btn",onClick:this.sendOfflineMsg},this.props.meta.offlineSendButton))))}}),ae=t.createClass({displayName:"ChatWidget",requireInfoState:function(e){var t=JSON.parse(o.getItem(b));return{requireInfo:e.requireInfo&&!t}},getInitialState:function(){return this.requireInfoState(this.props.meta)},componentWillReceiveProps:function(e){this.setState(this.requireInfoState(e.meta))},enteredRequiredInfo:function(){setTimeout(function(){this.setState({requireInfo:!1})}.bind(this),500)},render:function(){return this.props.isOffline?t.createElement(te,t.__spread({},this.props)):this.state.requireInfo&&!this.props.ephMsg?t.createElement(W,t.__spread({},this.props,{enteredRequiredInfo:this.enteredRequiredInfo})):t.createElement(Q,t.__spread({},this.props))}}),se=t.createClass({displayName:"PoweredBy",render:function(){var e="chatlio-powered-by";return this.props.isOffline&&(e+=" chatlio-powered-by-offline"),t.createElement("div",{className:"chatlio-clear"},t.createElement("div",{className:e},"Powered by ",t.createElement("a",{target:"_blank",href:"https://chatlio.com"},"Chatlio")))}}),ie=t.createClass({displayName:"WidgetChrome",getInitialState:function(){return{dropZoneClass:""}},isOffline:function(){if(this.props.showingOfflineForm)return!0;var e=Number(this.props.meta.maxVisitorInactiveMins);return"busy"===this.props.meta.status?(e=Math.max(e,5),!ce(this.props.messages[this.props.messages.length-1],e)):!ce(this.props.messages[this.props.messages.length-1],e)&&!(!this.props.meta.off&&"offline"!==this.props.meta.status)},abortRender:function(){return!this.props.meta||!(!this.isOffline()||!this.props.meta.hideWhenOffline)},showDropZone:function(){this.setState({dropZoneClass:" chatlio-drag-over"})},hideDropZone:function(){this.setState({dropZoneClass:""})},toggleWidget:function(e){this.props.toggleWidget(e)},closeWidget:function(e){if(e.stopPropagation(),this.props.conversationEnded)return void this.props.toggleWidget(e);this.props.closeWidget(e)},fetchAuthorInfoFromHistory:function(){var e={name:void 0,avatarUrl:void 0};if(this.props.messages.length>=1&&new Date(1e3*this.props.messages[this.props.messages.length-1].ts)>Date.now()-9e5)for(var t=this.props.messages.length;t--;)if("You"!==this.props.messages[t].author){"Them"!==this.props.messages[t].author&&(e.name=this.props.messages[t].author);var a=this.props.messages[t].avatarUrl;if(a&&a.length>1){e.avatarUrl=this.props.messages[t].avatarUrl;break}}return e},render:function(){if(this.abortRender())return null;var e="",a="";switch(this.props.meta.collapsedMode){case"chip":e=" chatlio-title-bar-chip-container ",a=" chatlio-title-bar-chip ";break;case"button":e=" chatlio-title-bar-button-container ",a=" chatlio-title-bar-button "}var s=this.isOffline(),i={backgroundColor:this.props.meta.titleColor},n={color:this.props.meta.titleFontColor},r="chatlio-widget "+e+this.props.widgetViewState+this.state.dropZoneClass;if(!0===s&&(r+=" offline"),!0===p.embedInline){r+=" embed-inline";var o=document.getElementById("chatlio-widget");o.className=o.className+" embed-inline-container"}var l,c,h=s?this.props.meta.offlineTitle:this.props.meta.onlineTitle,m=s?this.props.meta.offlineTitle:this.props.meta.agentLabel,d=null;if(this.props.meta.teamAvatarOn&&this.props.meta.teamAvatarUrl)l=t.createElement("div",{className:"chatlio-title-avatar-container"},t.createElement("img",{src:this.props.meta.teamAvatarUrl})),this.props.meta.forwardSlackUserName&&(c=this.fetchAuthorInfoFromHistory(),c.name&&(m=c.name));else if(this.props.meta.forwardSlackUserName&&!this.isOffline()){var u="";this.props.meta.showAvatarPreChat?this.props.meta.activeAgentAvatar&&(u=this.props.meta.activeAgentAvatar):this.props.meta.teamAvatarUrl&&(u=this.props.meta.teamAvatarUrl),c=this.fetchAuthorInfoFromHistory(),c.name&&(m=c.name),c.avatarUrl&&(u=c.avatarUrl),u.length>1&&(l=t.createElement("div",{className:"chatlio-title-avatar-container"},t.createElement("img",{src:u})))}return this.props.drawBadge&&(d=t.createElement("div",{className:"chatlio-trigger-badge",key:"t1"},t.createElement("span",null,"1"))),t.createElement("div",{className:r},t.createElement(N,{transitionName:"chatlio-trigger-badge-anim",transitionEnterTimeout:3600,transitionLeaveTimeout:1},d),t.createElement(N,{transitionName:"flag-slide-out",transitionAppear:"closed"===this.props.widgetViewState,transitionEnterTimeout:5e3,transitionLeaveTimeout:5e3,transitionAppearTimeout:5e3},t.createElement("div",{className:"chatlio-title-bar "+a,style:i,onClick:this.toggleWidget},t.createElement("span",{className:"chatlio-icon-chevron-up chatlio-up-arrow "+this.props.widgetViewState,style:n}),t.createElement("span",{className:"chatlio-title-text",onClick:this.toggleWidget},t.createElement("a",{style:n},"closed"===this.props.widgetViewState?h:m,l,t.createElement("span",{className:s?"chatlio-online-dot chatlio-hide":"chatlio-online-dot"},"●"))),this.props.meta.showConversationEnd&&!s?t.createElement("div",{ref:"closeControl",className:"chatlio-controls-close "+this.props.widgetViewState,style:n},t.createElement("span",{onClick:this.toggleWidget,className:"chatlio-widget-minimize chatlio-icon-minus "+this.props.widgetViewState}),t.createElement("span",{className:"chatlio-widget-close chatlio-icon-cross2"+this.props.widgetViewState,onClick:this.closeWidget})):t.createElement("div",{ref:"closeControl",className:"chatlio-controls-close "+this.props.widgetViewState,style:n},t.createElement("span",{className:"chatlio-icon-minus chatlio-widget-minimize "+this.props.widgetViewState}),t.createElement("span",{className:"chatlio-icon-cross2 chatlio-widget-close"+this.props.widgetViewState})),t.createElement("div",{className:"chatlio-widget-menu-items chatlio-hide"},t.createElement("table",{className:"chatlio-widget-menu-items-table"},t.createElement("tbody",null,t.createElement("tr",{className:"chatlio-widget-menu-icons"},t.createElement("td",null,t.createElement("span",{className:"chatlio-icon-envelope"})),t.createElement("td",null,t.createElement("span",{className:"chatlio-icon-mute"})),t.createElement("td",null,t.createElement("span",{className:"chatlio-icon-cross-circle"}))),t.createElement("tr",null,t.createElement("td",null,"Email"),t.createElement("td",null,"Mute"),t.createElement("td",null,"End Chat")))))),t.createElement(ae,t.__spread({},this.props,{showDropZone:this.showDropZone,hideDropZone:this.hideDropZone,isOffline:s})),this.props.meta.whiteLabel?"":t.createElement(se,{isOffline:s})))}}),re=t.createClass({displayName:"WidgetContainer",getInitialState:function(){return{uuid:X.vsUuid(),messages:le(),isFirstMsg:!0,widgetClosed:!this.props.meta.expanded,userTyping:!1,requestScreenshot:!1,requestInfo:!1}},componentDidMount:function(){this.state.messages.length>0&&ke(this.onMessage,this.onTyping,this.onRequestScreenshot,this.onRequestInfo,this.handleNoAnswer,this.onConversationEnd),this.props.meta.trackPresence&&ee(),C.addEventListener("chatlio.trigger",this.onTrigger),C.addEventListener("chatlio.clear-trigger",this.onClearTrigger),F("mounted")},componentWillUnmount:function(){C.removeEventListener("chatlio.trigger",this.onTrigger),C.removeEventListener("chatlio.clear-trigger",this.onClearTrigger)},componentWillReceiveProps:function(e){e.startChat?(e.meta.requireInfo&&o.setItem(b,!0),ke(this.onMessage,this.onTyping,this.onRequestScreenshot,this.onRequestInfo,this.handleNoAnswer,this.onConversationEnd)):e.clearHistory&&this.setState({messages:le()}),this.setState({widgetClosed:!e.meta.expanded})},onTrigger:function(e){this.state.messages=[];var t=e.data,a={body:t.message,tUid:t.uid,author:"Them",ts:(Date.now()/1e3).toString()};_||this.toggleWidget(e),this.ephMsg(a)},onClearTrigger:function(){this.state.ephMsg&&this.setState({ephMsg:void 0})},widgetViewState:function(){return p.embedInline?"":this.state.widgetClosed?"closed":""},toggleWidget:function(e){o.setItem(E,JSON.stringify(!this.state.widgetClosed)),this.setState({widgetClosed:!this.state.widgetClosed,drawBadge:!1,conversationEnded:!1}),e.stopPropagation(),F(this.state.widgetClosed?"expanded":"collapsed")},closeWidget:function(e){if(e.stopPropagation(),0===this.state.messages.length)return void this.toggleWidget(e);this.setState({showConfirmConversationEnd:!0})},cancelConfirmConversationEnd:function(e){this.setState({showConfirmConversationEnd:!1}),e.stopPropagation()},saveToLS:function(){o.setItem(E,JSON.stringify(this.state.widgetClosed)),o.setItem(w,JSON.stringify(this.state.messages.slice(-200)))},sendMessage:function(e){if(13===e.keyCode||void 0===e.keyCode||740===e.detail){if(e.shiftKey)return!0;e.preventDefault();var t="TEXTAREA"===e.target.nodeName?e.target:e.target.parentNode.parentNode.firstChild;t.rows=1;var a=t.value.trim();if(""===a)return!1;t.value="";var s={body:T(B(a)),author:"You",ts:(Date.now()/1e3).toString()},i=r(a).replace(/<(.*?)\|(.*?)>/gm,"$1 $2").replace(/<!(here|channel)>/gm,"@$1");this.state.isFirstMsg?(this.setState({isFirstMsg:!1}),ke(this.onMessage,this.onTyping,this.onRequestScreenshot,this.onRequestInfo,this.handleNoAnswer,this.onConversationEnd),0===this.state.messages.length&&setTimeout(F,0,"firstMessageSent",s),Ae(i,{tUid:this.state.ephMsg&&this.state.ephMsg.tUid})):Ae(i),this.state.messages.push(s),this.setState({messages:this.state.messages}),this.saveToLS()}else(32===e.keyCode||e.keyCode>46&&e.keyCode<91||e.keyCode>95&&e.keyCode<112||e.keyCode>185&&e.keyCode<223)&&this.state.messages.length>0&&Ce();return!0},ephMsg:function(e){M.play(),!0===this.props.meta.newMsgNotifications&&g&&window.Tinycon&&(R?l=0:l++,Tinycon.setBubble(l)),e.body=T(e.body),this.setState({ephMsg:e,widgetClosed:!!_&&this.state.widgetClosed,userTyping:!1,showOfflineForm:!1,drawBadge:_})},onMessage:function(e){for(var t=this.state.messages.length-1,a=Math.max(0,t-5);t>=a;--t)if(this.state.messages[t].ts===e.ts){if(!e.isEdited)return;return this.state.messages[t].body=T(e.body),this.setState({widgetClosed:!1,userTyping:!1,messages:this.state.messages}),void this.saveToLS()}if(M.play(),e.body=T(e.body),this.setState({widgetClosed:!1,userTyping:!1,showOfflineForm:!1,messages:this.state.messages.concat(e)}),!0===this.props.meta.newMsgNotifications&&g){if(!window.Tinycon)return;R?l=0:l++,Tinycon.setBubble(l)}this.saveToLS()},isTypingTimeout:0,onTyping:function(e){clearTimeout(this.isTypingTimeout),this.setState({userTyping:e});var t=this;this.isTypingTimeout=setTimeout(function(){t.setState({userTyping:!1})},6e3)},onRequestScreenshot:function(){clearTimeout(this.isTypingTimeout),this.setState({userTyping:!1,requestScreenshot:{dismiss:this.onDismissScreenshot,send:this.onSendScreenshot}}),M.play()},onConversationEnd:function(e){!0===e&&ue(X.vsUuid(),"client-end-chat"),this.props.meta.showConversationEnd&&(this.setState({conversationEnded:!0,showConfirmConversationEnd:!1,messages:[]}),o.removeItem(w))},handleNoAnswer:function(e){this.props.meta[e.key]&&(e.data=B(this.props.meta[e.key])),this.state.messages.push({body:e.data,author:"Them",ts:(Date.now()/1e3).toString()}),this.setState({messages:this.state.messages,requestInfo:!1}),this.saveToLS(),M.play(),setTimeout(F,0,"noReply",e)},onShowOfflineForm:function(){this.setState({showingOfflineForm:!0})},onSendScreenshot:function(){if(ue(X.vsUuid(),"client-screenshot-sending"),"function"!=typeof window.html2canvas)return void console.warn("Screenshot library is not ready yet. Try again in a short while.");var e=this,t={onrendered:function(t){e.setState({requestScreenshot:!1}),ne("https://api.chatlio.com/v1/p/visitor/screenshot",{verb:"POST",data:{image:t.toDataURL("image/png"),vsUuid:X.vsUuid(),ceUuid:c},success:function(){e.state.messages.push({body:"✅",author:"You",ts:(Date.now()/1e3).toString()}),e.setState({messages:e.state.messages})},onerror:function(){console.warn("There was a problem sending your screenshot to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})}};0===window.pageYOffset&&(t.width=window.innerWidth,t.height=window.innerHeight),window.html2canvas(document.body,t)},onDismissScreenshot:function(){ue(X.vsUuid(),"client-screenshot-declined"),this.setState({requestScreenshot:!1})},onRequestInfo:function(e){clearTimeout(this.isTypingTimeout);var t=e.data.split("|");this.state.requestInfo={dismiss:this.onDismissRequestInfo,send:this.onSendRequestInfo,fields:t},this.state.userTyping=!1,this.setState(this.state),M.play()},onDismissRequestInfo:function(){ue(X.vsUuid(),"client-request-info-declined"),this.setState({requestInfo:!1})},onSendRequestInfo:function(e){ue(X.vsUuid(),"client-request-info-sending",e),this.state.messages.push({body:"✅",author:"You",ts:(Date.now()/1e3).toString()}),this.setState({messages:this.state.messages,requestInfo:!1})},render:function(){return t.createElement(ie,{meta:this.props.meta,requireInfo:this.props.meta.requireInfo,messages:this.state.messages,showConfirmConversationEnd:this.state.showConfirmConversationEnd,toggleWidget:this.toggleWidget,closeWidget:this.closeWidget,widgetViewState:this.widgetViewState(),sendMessage:this.sendMessage,userTyping:this.state.userTyping,requestScreenshot:this.state.requestScreenshot,onShowOfflineForm:this.onShowOfflineForm,showingOfflineForm:this.state.showingOfflineForm,requestInfo:this.state.requestInfo,startChat:this.props.startChat,ephMsg:this.state.ephMsg,drawBadge:this.state.drawBadge,conversationEnded:this.state.conversationEnded,onConversationEnd:this.onConversationEnd,cancelConfirmConversationEnd:this.cancelConfirmConversationEnd})}});de=function(e,s){a.render(t.createElement(re,t.__spread({},s,{meta:e})),C)},g=!v;var oe=pe(e,null,!0);U=setTimeout(qe,q),!0===oe.newMsgNotifications&&Le(),!0===oe.playSound&&L(),Re(),ye(oe),!0===oe.useSgmt&&z("https://w.chatlio.com/v4/a/sgmt-v1.1.1.646066fe.js")}}();